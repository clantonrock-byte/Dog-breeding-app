<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Breeder Pro – Dogs</title>

<style>
body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: #0e0f14;
  color: #eaeaea;
}

header {
  padding: 12px;
  background: #12131a;
  position: sticky;
  top: 0;
  z-index: 10;
}

h1 {
  margin: 0;
  font-size: 18px;
}

button {
  background: #2f6df6;
  color: white;
  border: none;
  border-radius: 10px;
  padding: 10px 14px;
  font-size: 14px;
}

button.secondary {
  background: #2a2a2a;
}

.section {
  padding: 12px;
}

.card {
  background: #161821;
  border-radius: 14px;
  padding: 12px;
  margin-bottom: 12px;
}

.card h3 {
  margin: 0 0 4px 0;
}

.card p {
  margin: 0;
  font-size: 13px;
  opacity: 0.85;
}

.photo-placeholder {
  width: 64px;
  height: 64px;
  border-radius: 10px;
  background: #2a2a2a;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  margin-top: 8px;
  cursor: pointer;
}

.photo-placeholder img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 10px;
}
</style>
</head>

<body>

<header>
  <h1>Breeder Pro – Dogs</h1>
</header>

<div id="viewList" class="section"></div>
<div id="viewProfile" class="section" style="display:none;"></div>

<script>
/* =========================
   DATA + STORAGE
========================= */

const STORAGE_KEY = "breederPro_dogs_v_clean";

let dogs = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [
  { id: crypto.randomUUID(), callName: "Aina", sex: "Female", status: "Adult", photo: null },
  { id: crypto.randomUUID(), callName: "Buddha", sex: "Male", status: "Adult", photo: null },
  { id: crypto.randomUUID(), callName: "Hank", sex: "Male", status: "Adult", photo: null },
  { id: crypto.randomUUID(), callName: "Kaia", sex: "Unknown", status: "Archived", photo: null },
  { id: crypto.randomUUID(), callName: "Kama", sex: "Female", status: "Puppy", photo: null }
];

let activeDogId = null;

function saveDogs() {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(dogs));
}

/* =========================
   LIST VIEW
========================= */

function renderList() {
  const el = document.getElementById("viewList");
  const profile = document.getElementById("viewProfile");
  profile.style.display = "none";
  el.style.display = "block";

  el.innerHTML = "";

  dogs.forEach(dog => {
    const card = document.createElement("div");
    card.className = "card";
    card.onclick = () => openProfile(dog.id);

    card.innerHTML = `
      <h3>${dog.callName}</h3>
      <p>${dog.sex} • ${dog.status}</p>
      <div class="photo-placeholder">
        ${dog.photo ? `<img src="${dog.photo}">` : "Profile"}
      </div>
    `;

    el.appendChild(card);
  });
}

/* =========================
   PROFILE VIEW
========================= */

function openProfile(id) {
  activeDogId = id;
  const dog = dogs.find(d => d.id === id);
  if (!dog) return;

  const list = document.getElementById("viewList");
  const profile = document.getElementById("viewProfile");
  list.style.display = "none";
  profile.style.display = "block";

  profile.innerHTML = `
    <button class="secondary" onclick="renderList()">← Back</button>

    <div class="card">
      <h3>${dog.callName}</h3>
      <p>${dog.sex} • ${dog.status}</p>

      <div class="photo-placeholder" onclick="pickPhoto()">
        ${dog.photo ? `<img src="${dog.photo}">` : "Tap to add photo"}
      </div>
    </div>
  `;
}

/* =========================
   PHOTO HANDLING (PER DOG)
========================= */

function pickPhoto() {
  const dog = dogs.find(d => d.id === activeDogId);
  if (!dog) return;

  const input = document.createElement("input");
  input.type = "file";
  input.accept = "image/*";

  input.onchange = () => {
    const file = input.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = () => {
      dog.photo = reader.result;
      saveDogs();
      openProfile(dog.id);
    };
    reader.readAsDataURL(file);
  };

  input.click();
}

/* =========================
   INIT
========================= */

renderList();
</script>

</body>
</html>
